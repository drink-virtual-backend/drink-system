{"version":3,"sources":["pages/drink/fetch.ts","utils/index.ts","utils/constant.ts","pages/drink/exist.tsx","pages/drink/column.tsx","pages/drink/custom.tsx","pages/drink/index.tsx","pages/user/columns.tsx","pages/user/index.tsx","pages/user/fetch.ts","pages/deliver/columns.tsx","pages/deliver/index.tsx","pages/deliver/fetch.ts","pages/orders/index.tsx","pages/orders/fetch.ts","pages/orders/columns.tsx","pages/material/fetch.ts","pages/material/index.tsx","pages/material/columns.tsx","App.tsx","utils/request.ts","index.tsx"],"names":["getMaterialList","axios","get","actionDrink","drink","status","post","actionDrinkSelf","upload","file","key","observable","qiniu","Promise","resolve","reject","subscribe","next","res","error","err","complete","FormItem","Item","Option","layout","wrapperCol","span","defaultDrink","drink_avatartUrl","drink_form","drink_name","drink_price","action","useState","visible","setVisible","loading","setLoading","tagVisible","setTagVisible","setStatus","materials","setMaterials","drinkList","setDrinkList","setDrink","useForm","form","newMaterial","name","value","onUpload","options","a","timestamp","Date","now","toString","onMaterialConfirm","uploadButton","LoadingOutlined","PlusOutlined","columns","onDel","then","data","fetchData","message","success","onEdit","setFieldsValue","title","dataIndex","render","record","index","values","list","map","item","width","src","alt","id","onClick","type","size","style","marginLeft","useEffect","extra","rowKey","bordered","dataSource","footer","onCancel","onFinish","label","required","disabled","placeholder","display","alignItems","flexWrap","closable","onClose","material","filter","className","marginTop","onChange","some","choice_name","min","defaultValue","onPressEnter","listType","showUploadList","customRequest","textAlign","htmlType","material_options","drink_capacity","current","setCurrent","drinkCustom","join","onBlur","push","formName","length","TabPane","tab","user_home","user_menpai","userList","setUserList","orders","allOrders","setAllOrders","order","class","marginRight","price","number","reduce","desc","fItem","slice","count","forEach","time","dayjs","format","user_name","user_phone","man_id","man_phone","1","2","3","Group","e","target","Button","actionMaterial","choice_avatartUrl","materialList","setMaterialList","choice_num","Header","Content","Footer","Sider","App","ref","useRef","pageId","hashRouter","pathname","history","location","height","to","theme","mode","onSelect","param","selectedKeys","defaultSelectedKeys","UserOutlined","margin","padding","minHeight","path","exact","component","Material","Drink","User","Deliver","Orders","defaults","baseURL","interceptors","response","use","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.38821791.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport const getMaterialList = () => {\n    return axios.get('/manage/choice') as Promise<MaterialList>;\n};\n\nexport const getDrinkList = () => {\n    return axios.get('/manage/drink') as Promise<DrinkList>;\n};\n\nexport const actionDrink = (drink: Drink, status: number) => {\n    return axios.post('/manage/drink', {\n        ...drink,\n        status,\n    });\n};\n\nexport const getDrinkSelf = () => {\n    return axios.get('/manage/drinkself') as Promise<DrinkCustom[]>;\n};\n\nexport const actionDrinkSelf = (drink: DrinkCustom, status: number) => {\n    return axios.post('/manage/drinkself', {\n        ...drink,\n        status,\n    });\n};\n","import * as qiniu from 'qiniu-js';\nimport { uploadToken as token } from './constant';\n\nexport const upload = (file: Blob, key: string) => {\n    const observable = qiniu.upload(file, key, token, {}, {});\n    return new Promise((resolve, reject) => {\n        observable.subscribe({\n            next(res){\n            },\n            error(err){\n                reject(err)\n            }, \n            complete(res){\n                resolve(res)\n            },\n        });\n    });\n};","export const uploadToken = '33mFN7fKO2h85Lf46XvJtkRAwu6HQ--KMWnbEqHn:8RPqNE7CHyJP9qD5QMvsF7mWFAY=:eyJzY29wZSI6InNjZWxleS1zdG9yZSIsImRlYWRsaW5lIjoxNjE1MzA3MTg0fQ==';\nexport const serverURL = 'https://www.sxyuening.cn';\n","import React, { useState, useEffect } from \"react\";\nimport {\n    Table,\n    Button,\n    Modal,\n    Form,\n    Upload,\n    Card,\n    Input,\n    Select,\n    Tag,\n    InputNumber,\n    message,\n} from \"antd\";\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { getDrinkList, getMaterialList, actionDrink } from \"./fetch\";\nimport { getColumns } from \"./column\";\nimport { upload } from \"../../utils\";\nimport \"./index.css\";\n\nconst { Item: FormItem } = Form;\nconst { Option } = Select;\nconst layout = {\n    wrapperCol: { span: 24 },\n};\nconst defaultDrink = {\n    drink_avatartUrl: \"\",\n    drink_form: [],\n    drink_name: \"\",\n    drink_price: 0,\n};\n\nexport default () => {\n    const [visible, setVisible] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [tagVisible, setTagVisible] = useState(false);\n    const [status, setStatus] = useState(1);\n    const [materials, setMaterials] = useState<MaterialList>([]);\n    const [drinkList, setDrinkList] = useState<DrinkList>([]);\n    const [drink, setDrink] = useState<Drink>(defaultDrink);\n    const [form] = Form.useForm();\n    const newMaterial = { name: \"\", value: 0 };\n    const onUpload = async (options: any) => {\n        const { file } = options;\n        setLoading(true);\n        const timestamp = Date.now().toString();\n        await upload(file, timestamp);\n        setLoading(false);\n        setDrink({\n            ...drink,\n            drink_avatartUrl: `https://img.qinyongli.cn/${timestamp}`,\n        });\n    };\n    const onSubmit = (values: any) => {\n        actionDrink({\n            ...drink,\n            drink_name: values.drink_name,\n            drink_price: values.drink_price,\n        }, status).then(data => {\n            message.success('提交成功');\n            fetchData();\n            setVisible(false);\n        });\n    };\n    const onMaterialConfirm = () => {\n        setDrink({\n            ...drink,\n            drink_form: [...drink.drink_form, newMaterial],\n        });\n        setTagVisible(false);\n    };\n    const onMaterialSelect = (value: string) => {\n        newMaterial.name = value;\n    };\n    const onMaterialChange = (value: undefined | number) => {\n        if (value) {\n            newMaterial.value = value;\n        }\n    };\n    const uploadButton = (\n        <div>\n            {loading ? <LoadingOutlined /> : <PlusOutlined />}\n            <div>上传</div>\n        </div>\n    );\n    const onAdd = () => {\n        setStatus(1);\n        setVisible(true);\n        setDrink(defaultDrink);\n        form.setFieldsValue({\n            drink_name: defaultDrink.drink_name,\n            drink_price: defaultDrink.drink_price,\n            drink_avatartUrl: defaultDrink.drink_avatartUrl,\n        });\n    };\n    const onDel = (drink: Drink) => {\n        actionDrink(drink, 2).then(data => {\n            fetchData();\n            message.success('删除成功');\n        })\n    };\n    const onMaterialCancel = () => {\n        setTagVisible(false);\n    };\n    const onEdit = (drink: Drink) => {\n        setStatus(3);\n        setVisible(true);\n        setDrink(drink);\n        form.setFieldsValue({\n            drink_name: drink.drink_name,\n            drink_price: drink.drink_price,\n            drink_avatartUrl: drink.drink_avatartUrl,\n        });\n        \n    };\n    const onClose = (material: NameValue) => {\n        drink.drink_form = drink.drink_form.filter((item: NameValue) => {\n            return material !== item;\n        });\n    };  \n    const columns = getColumns({ onDel, onEdit });\n    const fetchData = () => {\n        getDrinkList().then((data) => {\n            setDrinkList(data);\n        });\n        getMaterialList().then((data) => {\n            setMaterials(data);\n        });\n    }\n    useEffect(() => {\n        fetchData();\n    }, []);\n    return (\n        <>\n            <Card\n                title=\"已配饮料配置\"\n                extra={\n                    <Button type=\"primary\" onClick={onAdd}>\n                        添加\n                    </Button>\n                }\n            >\n                <Table\n                    rowKey=\"drink_name\"\n                    bordered\n                    dataSource={drinkList}\n                    columns={columns}\n                />\n            </Card>\n            <Modal\n                title={status === 1 ? \"添加饮料\" : \"编辑饮料\"}\n                visible={visible}\n                footer={null}\n                onCancel={() => setVisible(false)}\n            >\n                <Form\n                    layout=\"vertical\"\n                    form={form}\n                    onFinish={onSubmit}\n                    {...layout}\n                >\n                    <FormItem name=\"drink_name\" label=\"名称\" required>\n                        <Input\n                            disabled={status === 3}\n                            width=\"100%\"\n                            placeholder=\"饮料名称\"\n                        />\n                    </FormItem>\n                    <FormItem name=\"drink_form\" label=\"原料\" required>\n                        <div\n                            style={{\n                                display: \"flex\",\n                                alignItems: \"flex-end\",\n                                flexWrap: \"wrap\",\n                            }}\n                        >\n                            {drink.drink_form.map((item: any, index) => {\n                                return (\n                                    <Tag closable onClose={() => onClose(item)} key={index}>\n                                        {`${item.name} ${item.value}g`}\n                                    </Tag>\n                                );\n                            })}\n                            {tagVisible ? (\n                                null\n                            ) : (\n                                <Tag\n                                    className=\"tag-plus\"\n                                    onClick={() => setTagVisible(true)}\n                                >\n                                    <PlusOutlined />\n                                </Tag>\n                            )}\n                        </div>\n                        {\n                            tagVisible ? (\n                                <div style={{\n                                    marginTop: 5\n                                }}>\n                                    <Select\n                                        style={{ width: 78 }}\n                                        size=\"small\"\n                                        onChange={onMaterialSelect}\n                                    >\n                                        {materials.map((item) => {\n                                            return (\n                                                <Option\n                                                    disabled={drink.drink_form.some((form: NameValue) => {\n                                                        return form.name === item.choice_name;\n                                                    })}\n                                                    value={item.choice_name}\n                                                >\n                                                    {item.choice_name}\n                                                </Option>\n                                            );\n                                        })}\n                                    </Select>\n                                    <InputNumber\n                                        style={{ width: 50 }}\n                                        size=\"small\"\n                                        min={1}\n                                        defaultValue={1}\n                                        onChange={onMaterialChange}\n                                        onPressEnter={onMaterialConfirm}\n                                    />\n                                    <Button\n                                        onClick={onMaterialCancel}\n                                        size=\"small\"\n                                    >\n                                        取消\n                                    </Button>\n                                    <Button\n                                        onClick={onMaterialConfirm}\n                                        type=\"primary\"\n                                        size=\"small\"\n                                    >\n                                        确认\n                                    </Button>\n                                </div>\n                            ) : null\n                        }\n                    </FormItem>\n                    <FormItem name=\"drink_price\" label=\"价格\" required>\n                        <InputNumber width=\"100%\" placeholder=\"饮料价格\" />\n                    </FormItem>\n                    <FormItem name=\"drink_avatartUrl\" label=\"缩略图\" required>\n                        <Upload\n                            listType=\"picture-card\"\n                            showUploadList={false}\n                            customRequest={onUpload}\n                        >\n                            {drink.drink_avatartUrl ? (\n                                <img\n                                    src={drink.drink_avatartUrl}\n                                    alt=\"thumbnailUrl\"\n                                    style={{ width: \"100%\" }}\n                                />\n                            ) : (\n                                uploadButton\n                            )}\n                        </Upload>\n                    </FormItem>\n                    <FormItem style={{ textAlign: \"center\" }}>\n                        <Button type=\"primary\" htmlType=\"submit\">\n                            提交\n                        </Button>\n                    </FormItem>\n                </Form>\n            </Modal>\n        </>\n    );\n};\n","import React from 'react';\nimport { Button } from 'antd';\n\nexport const getColumns = (action: Obj) => {\n    const columns = [\n        {\n            title: \"序号\",\n            dataIndex: \"id\",\n            render(value: string, record: any, index: number) {\n                return index + 1;\n            }\n        },\n        {\n            title: \"名称\",\n            dataIndex: \"drink_name\",\n        },\n        {\n            title: \"原料\",\n            dataIndex: \"drink_form\",\n            render(values: any[]) {\n                const list = values.map((item, index) => (\n                    <div key={index}>\n                        { `${item.name}: ${item.value}g` }\n                    </div>\n                ));\n                return (\n                    <>\n                        { list }\n                    </>\n                )\n            }\n        },\n        {\n            title: \"价格\",\n            dataIndex: \"drink_price\",\n        },\n        {\n            title: \"缩略图\",\n            width: 150,\n            dataIndex: \"drink_avatartUrl\",\n            render(value: string) {\n                return (\n                    <img width=\"100%\" src={value} alt=\"\"/>\n                )\n            }\n        },\n        {\n            title: \"操作\",\n            dataIndex: \"id\",\n            render(id: number, record: Drink) {\n                return (\n                    <>\n                        <Button onClick={() => action.onDel(record)} type=\"primary\" size=\"small\">删除</Button>\n                        <Button onClick={() => action.onEdit(record)} style={{ marginLeft: 10 }} type=\"primary\" size=\"small\">编辑</Button>\n                    </>\n                )\n            }\n        }\n    ];\n    return columns;\n}\n\nexport const getCustomColumns = (action: Obj) => {\n    const columns = [\n        {\n            title: '名称',\n            dataIndex: 'drink_name'\n        },\n        {\n            title: '可选原料',\n            dataIndex: 'material_options',\n            render(value: string[]) {\n                return (\n                    value.join('、')\n                );\n            }\n        },\n        {\n            title: '价格',\n            dataIndex: 'drink_price'\n        },\n        {\n            title: '容量',\n            dataIndex: 'drink_capacity'\n        },\n        {\n            title: '缩略图',\n            dataIndex: \"drink_avatartUrl\",\n            width: 150,\n            render(value: string) {\n                return (\n                    <img width=\"100%\" src={value} alt=\"\"/>\n                )\n            }\n        },\n        {\n            title: '操作',\n            render(id: number, record: DrinkCustom) {\n                return (\n                    <>\n                        <Button onClick={() => action.onDel(record)} type=\"primary\" size=\"small\">删除</Button>\n                        <Button onClick={() => action.onEdit(record)} style={{ marginLeft: 10 }} type=\"primary\" size=\"small\">编辑</Button>\n                    </>\n                )\n            }\n        },\n    ];\n    return columns;\n};","import React, { useState, useEffect } from \"react\";\nimport {\n    Card,\n    Table,\n    Modal,\n    Form,\n    Input,\n    Select,\n    Tag,\n    InputNumber,\n    Upload,\n    Button, \n    message,\n} from \"antd\";\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { getCustomColumns } from \"./column\";\nimport { upload } from \"../../utils\";\nimport { getMaterialList, getDrinkSelf, actionDrinkSelf } from \"./fetch\";\nconst { Option } = Select;\nconst { Item: FormItem } = Form;\nconst layout = {\n    wrapperCol: { span: 24 },\n};\nconst defaultDrink = {\n    drink_name: \"\",\n    drink_avatartUrl: \"\",\n    material_options: [],\n    drink_price: 0,\n    drink_capacity: 0,\n};\n\nexport default () => {\n    const [visible, setVisible] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [tagVisible, setTagVisible] = useState(false);\n    const [current, setCurrent] = useState('');\n    const [status, setStatus] = useState(1);\n    const [drink, setDrink] = useState<DrinkCustom>(defaultDrink);\n    const [drinkList, setDrinkList] = useState<DrinkCustom[]>([])\n    const [materials, setMaterials] = useState<MaterialList>([]);\n    const onUpload = async (options: any) => {\n        const { file } = options;\n        setLoading(true);\n        const timestamp = Date.now().toString();\n        await upload(file, timestamp);\n        setLoading(false);\n        setDrink({\n            ...drink,\n            drink_avatartUrl: `https://img.qinyongli.cn/${timestamp}`,\n        });\n    };\n    const onSubmit = (values: any) => {\n        actionDrinkSelf({\n            ...drink,\n            drink_name: values.drink_name,\n            drink_price: values.drink_price,\n            drink_capacity: values.drink_capacity,\n        }, status).then((res) => {\n            message.success('提交成功');\n            fetchData();\n            setVisible(false);\n        });\n    };\n    const onEdit = (drinkCustom: DrinkCustom) => {\n        setDrink(drinkCustom);\n        setVisible(true);\n        setStatus(3);\n        form.setFieldsValue({\n            drink_name: drinkCustom.drink_name,\n            drink_price: drinkCustom.drink_price,\n            drink_avatartUrl: drinkCustom.drink_avatartUrl,\n            drink_capacity: drinkCustom.drink_capacity,\n        });\n    };\n    const onDel = (drink: any) => {\n        actionDrinkSelf(drink, 2).then(data => {\n            fetchData();\n            message.success('删除成功');\n        });\n    };\n    const onAdd = () => {\n        setStatus(1);\n        setVisible(true);\n        setDrink(defaultDrink);\n        form.setFieldsValue({\n            drink_name: defaultDrink.drink_name,\n            drink_price: defaultDrink.drink_price,\n            drink_avatartUrl: defaultDrink.drink_avatartUrl,\n            drink_capacity: defaultDrink.drink_capacity,\n        });\n    };\n    const onMaterialSelect = (value: string) => {\n        setCurrent(value);\n    };\n    const onMaterialConfirm = () => {\n        if (current) {\n            drink.material_options.push(current);\n            setDrink({\n                ...drink\n            });\n            setCurrent('');\n        }\n        setTagVisible(false);\n    };\n    const onClose = (material: string) => {\n        let material_options = drink.material_options.filter((item: string) => {\n            return material !== item;\n        });\n        setDrink({\n            ...drink,\n            material_options: [...material_options],\n        });\n    };  \n    const uploadButton = (\n        <div>\n            {loading ? <LoadingOutlined /> : <PlusOutlined />}\n            <div>上传</div>\n        </div>\n    );\n    const fetchData = () => {\n        getMaterialList().then((data) => {\n            setMaterials(data);\n        });\n        getDrinkSelf().then(data => {\n            setDrinkList(data);\n        });\n    };\n    useEffect(() => {\n        fetchData();\n    }, []);\n    const columns = getCustomColumns({\n        onEdit,\n        onDel,\n    });\n    const [form] = Form.useForm();\n    return (\n        <>\n            <Card\n                title=\"自配饮料配置\"\n                extra={\n                    <Button type=\"primary\" onClick={onAdd}>\n                        添加\n                    </Button>\n                }\n            >\n                <Table bordered rowKey=\"drink_name\" columns={columns} dataSource={drinkList}></Table>\n            </Card>\n            <Modal\n                title=\"编辑饮料\"\n                visible={visible}\n                footer={null}\n                onCancel={() => setVisible(false)}\n            >\n                <Form\n                    layout=\"vertical\"\n                    form={form}\n                    onFinish={onSubmit}\n                    {...layout}\n                >\n                    <FormItem name=\"drink_name\" label=\"名称\" required>\n                        <Input\n                            disabled={status === 3}\n                            width=\"100%\"\n                            placeholder=\"饮料名称\"\n                        />\n                    </FormItem>\n                    <FormItem name=\"material_options\" label=\"原料(最多四种)\" required>\n                        <div\n                            style={{\n                                display: \"flex\",\n                                alignItems: \"flex-end\",\n                                flexWrap: \"wrap\",\n                            }}\n                        >\n                            {drink.material_options.map((item: any, index) => {\n                                return (\n                                    <Tag\n                                        closable\n                                        onClose={() => onClose(item)}\n                                        key={index}\n                                    >\n                                        {item}\n                                    </Tag>\n                                );\n                            })}\n                            {tagVisible ?  (\n                                <Select\n                                    style={{ width: 78 }}\n                                    size=\"small\"\n                                    onChange={onMaterialSelect}\n                                    onBlur={onMaterialConfirm}\n                                    value={current}\n                                >\n                                    {materials.map((item) => {\n                                        return (\n                                            <Option\n                                                disabled={drink.material_options.some(\n                                                    (formName: string) => {\n                                                        return (\n                                                            formName ===\n                                                            item.choice_name\n                                                        );\n                                                    }\n                                                )}\n                                                value={item.choice_name}\n                                            >\n                                                {item.choice_name}\n                                            </Option>\n                                        );\n                                    })}\n                                </Select>\n                            ) : (\n                                drink.material_options.length >= 4 ?\n                                null : (\n                                    <Tag\n                                        className=\"tag-plus\"\n                                        onClick={() => setTagVisible(true)}\n                                    >\n                                        <PlusOutlined />\n                                    </Tag>\n                                )\n                            )}\n                        </div>\n                    </FormItem>\n                    <FormItem name=\"drink_capacity\" label=\"容量\" required>\n                        <InputNumber width=\"100%\" placeholder=\"饮料容量\" />\n                    </FormItem>\n                    <FormItem name=\"drink_price\" label=\"价格\" required>\n                        <InputNumber width=\"100%\" placeholder=\"饮料价格\" />\n                    </FormItem>\n                    <FormItem name=\"drink_avatartUrl\" label=\"缩略图\" required>\n                        <Upload\n                            listType=\"picture-card\"\n                            showUploadList={false}\n                            customRequest={onUpload}\n                        >\n                            {drink.drink_avatartUrl ? (\n                                <img\n                                    src={drink.drink_avatartUrl}\n                                    alt=\"thumbnailUrl\"\n                                    style={{ width: \"100%\" }}\n                                />\n                            ) : (\n                                uploadButton\n                            )}\n                        </Upload>\n                    </FormItem>\n                    <FormItem style={{ textAlign: \"center\" }}>\n                        <Button type=\"primary\" htmlType=\"submit\">\n                            提交\n                        </Button>\n                    </FormItem>\n                </Form>\n            </Modal>\n        </>\n    );\n};\n","import React from 'react';\nimport {\n    Tabs,\n} from 'antd';\nimport Exist from './exist';\nimport Custom from './custom';\nconst { TabPane } = Tabs;\n\nexport default () => {\n    return (\n        <Tabs>\n            <TabPane tab=\"已配饮料\" key=\"1\">\n                <Exist />\n            </TabPane>\n            <TabPane tab=\"自配饮料\" key=\"2\">\n                <Custom />\n            </TabPane>\n        </Tabs>\n    );\n};\n","import React from 'react';\n\nexport const columns = [\n    {\n        title: \"序号\",\n        dataIndex: \"id\",\n        width: 80,\n        render(value: string, record: any, index: number) {\n            return index + 1;\n        }\n    },\n    {\n        title: \"姓名\",\n        width: 150,\n        dataIndex: \"user_name\",\n    },\n    {\n        title: '用户头像',\n        dataIndex: 'user_avatartUrl',\n        width: 150,\n        render(value: string) {\n            return (\n                <img style={{ width: '100%' }} src={value} alt=\"\"/>\n            )\n        }\n    },\n    {\n        title: '用户ID',\n        dataIndex: 'user_id',\n        width: 150,\n    },\n    {\n        title: \"手机号码\",\n        width: 150,\n        dataIndex: \"user_phone\",\n    },\n    {\n        title: \"住址\",\n        dataIndex: \"user_home\",\n        render(value: string, record: Obj) {\n            return (\n                <div>{record.user_home}{record.user_menpai}</div>\n            )\n        }\n    },\n];\n","import React, { useState, useEffect } from 'react';\nimport { Card, Table } from 'antd';\nimport { columns } from './columns';\nimport { getUserList } from './fetch';\n\nexport default () => {\n    const [userList, setUserList] = useState<UserList>([]);\n    const fetchData = () => {\n        getUserList().then(data => {\n            setUserList(data);\n        });\n    };\n    useEffect(() => {\n        fetchData();\n    }, []);\n    return (\n        <div>\n            <Card\n                title=\"用户列表\"\n            >\n                <Table\n                    bordered\n                    rowKey=\"user_id\"\n                    columns={columns}\n                    dataSource={userList}\n                >\n                </Table>\n            </Card>\n        </div>\n    );\n};\n","import axios from 'axios';\n\nexport const getUserList = () => {\n    return axios.get('/manage/user') as Promise<UserList>;\n}","import React from 'react';\n\nexport const columns = [\n    {\n        title: \"序号\",\n        width: 80,\n        dataIndex: \"id\",\n        render(value: string, record: any, index: number) {\n            return index + 1;\n        }\n    },\n    {\n        title: \"用户ID\",\n        width: 200,\n        dataIndex: \"man_id\",\n    },\n    {\n        title: '用户头像',\n        width: 150,\n        dataIndex: 'man_avatartUrl',\n        render(value: string) {\n            return (\n                <img style={{ width: '100%' }} src={value} alt=\"\"/>\n            )\n        }\n    },\n    {\n        title: \"手机号码\",\n        dataIndex: \"man_phone\",\n    },\n];","import React, { useState, useEffect } from 'react';\nimport { Card, Table } from 'antd';\nimport { columns } from './columns';\nimport { fetchDeliverList } from './fetch';\n\n\nexport default () => {\n    const [userList, setUserList] = useState<UserList>([]);\n    const fetchData = () => {\n        fetchDeliverList().then(data => {\n            setUserList(data);\n        });\n    };\n    useEffect(() => {\n        fetchData();\n    }, []);\n    return (\n        <div>\n            <Card\n                title=\"配送员列表\"\n            >\n                <Table\n                    rowKey=\"man_id\"\n                    bordered\n                    columns={columns}\n                    dataSource={userList}\n                >\n\n                </Table>\n            </Card>\n        </div>\n    )\n}\n","import axios from 'axios';\n\nexport const fetchDeliverList = () => {\n    return axios.get('/manage/gongjuren') as Promise<UserList>;\n}","import React, { useState, useEffect } from 'react';\nimport { Card, Table, Radio } from 'antd';\nimport { RadioChangeEvent } from 'antd/lib/radio'\nimport { getColumns } from './columns';\nimport { getOrderList } from './fetch';\nimport './index.css';\n\n\nexport default () => {\n    let orders: Array<any> = [];\n    const [status, setStatus] = useState(-1);\n    const [allOrders, setAllOrders] = useState([]);\n    const handleChange = (e: RadioChangeEvent) => {\n        setStatus(e.target.value);\n    };\n    useEffect(() => {\n        getOrderList().then(data => {\n            setAllOrders(data);\n        });\n    }, []);\n    if (status === -1) {\n        orders = allOrders;\n    } else {\n        orders = allOrders.filter((order: any) => {\n            return order.status === status;\n        });\n    }\n    const columns = [...getColumns({})];\n    return (\n        <div>\n            <Card\n                title=\"订单列表\"\n                extra={\n                    <Radio.Group\n                        value={status}\n                        onChange={handleChange}\n                    >\n                        <Radio.Button value={-1}>全部</Radio.Button>\n                        <Radio.Button value={1}>制作中</Radio.Button>\n                        <Radio.Button value={2}>配送中</Radio.Button>\n                        <Radio.Button value={3}>完成订单</Radio.Button>\n                    </Radio.Group>\n                }\n            >\n                <Table\n                    rowKey=\"order_id\"\n                    bordered\n                    columns={columns}\n                    dataSource={orders}\n                />\n            </Card>\n        </div>\n    )\n}\n","import axios from 'axios';\n\nexport const getOrderList = () => {\n    return axios.get('/manage/history') as Promise<any>;\n}","import React from 'react';\nimport dayjs from 'dayjs';\n\nexport const getColumns = (action: Obj) => {\n    const columns = [\n        {\n            title: \"序号\",\n            dataIndex: \"id\",\n            width: 50,\n            render(value: string, record: any, index: number) {\n                return index + 1;\n            }\n        },\n        {\n            title: \"订单内容\",\n            dataIndex: \"drink_form\",\n            render(drink_form: any) {\n                return (\n                    <>\n                        { drink_form.map((item:any, index: number) => {\n                            return (\n                                <div key={index}>\n                                    {\n                                        item.class === 1 ? (\n                                            <div>\n                                                { item.form.name }\n                                                <ul>\n                                                    <li>\n                                                        <span style={{marginRight: 5}}>数量:</span>\n                                                        { item.form.value }\n                                                    </li>\n                                                    <li>\n                                                        <span style={{marginRight: 5}}>价格:</span>\n                                                        { item.price }\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        ) : (\n                                            <div>\n                                                自配饮料\n                                                <ul>\n                                                    <li>\n                                                        <span style={{marginRight: 5}}>数量:</span>\n                                                        { item.number }\n                                                    </li>\n                                                    <li>\n                                                        <span style={{marginRight: 5}}>组成:</span>\n                                                        { item.form.reduce((desc: '', fItem: any) => {\n                                                            return `${desc}+${fItem.name}·${fItem.value}`\n                                                        }, '').slice(1) }\n                                                    </li>\n                                                    <li>\n                                                        <span style={{marginRight: 5}}>价格:</span>\n                                                        { item.price }\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        )\n                                    }\n                                </div>\n                            )\n                        }) }\n                    </>\n                )\n            }\n        },\n        {\n            title: '金额',\n            width: 50,\n            dataIndex: \"drink_form\",\n            render(drink_form: any) {\n                let count = 0;\n                drink_form.forEach((item: any) => {\n                    if (item.class === 1) {\n                        count += item.price * item.form.value;\n                    } else {\n                        count += item.price * item.number;\n                    }\n                })\n                return (\n                    <div>\n                        { count }\n                    </div>\n                )\n            }\n        },\n        {\n            title: '订单时间',\n            dataIndex: 'order_start_time',\n            render(time: string) {\n                return (\n                    <div>{ dayjs(time).format('YYYY-MM-DD HH:mm:ss')}</div>\n                )\n            }\n        },\n        {\n            title: \"收货人\",\n            dataIndex: \"user\",\n            width: 220,\n            render(value: any, record: any) {\n                return (\n                    <>\n                        <div>姓名: {record.user_name}</div>\n                        <div>手机号码: {record.user_phone}</div>\n                        <div>地址: {record.user_home + record.user_menpai}</div>\n                    </>\n                )\n            }\n        },\n        {\n            title: \"配送人\",\n            dataIndex: \"deliver\",\n            render(value: any, record: any) {\n                return (\n                    <>\n                        <div>配送人id: {record.man_id}</div>\n                        <div>手机号码: {record.man_phone}</div>\n                    </>\n                )\n            }\n        },\n        {\n            title: '订单状态',\n            dataIndex: 'status',\n            width: 100,\n            render(value: number) {\n                const map: {\n                    [key: string]: any\n                } = {\n                    1: '制作中',\n                    2: '配送中',\n                    3: '订单完成'\n                };\n                return map[value];\n            }\n        }\n    ];\n    return columns;\n}\n","import axios from 'axios';\n\nexport const getMaterialList = () => {\n    return axios.get('/manage/choice') as Promise<MaterialList>;\n};\n\nexport const actionMaterial = (data: Obj) => {\n    return axios.post('/manage/choice', {\n        choice_avatartUrl: '',\n        ...data,\n    });\n};\n","import React, { useState, useEffect } from 'react';\nimport { Card, Button, Table, Modal, Form, Input, message } from 'antd';\nimport { getColumns } from './columns';\nimport { getMaterialList, actionMaterial } from './fetch';\n\nconst { Item: FormItem } = Form;\nconst layout = {\n    wrapperCol: { span: 24 }\n};\n\nexport default () => {\n    const [visible, setVisible] = useState(false);\n    const [status, setStatus] = useState(0);\n    const [materialList, setMaterialList] = useState<MaterialList>([]);\n    const [form] = Form.useForm();\n    const fetchData = () => {\n        getMaterialList().then((data: MaterialList) => {\n            setMaterialList(data);\n        });\n    };\n    const onSubmit = (values: Obj) => {\n        actionMaterial({\n            name: values.choice_name,\n            number: values.choice_num,\n            status,\n        }).then(data => {\n            setVisible(false);\n            message.success('提交成功');\n            fetchData();\n        });\n    };\n    const onAdd = () => {\n        setStatus(1);\n        setVisible(true);\n        form.setFieldsValue({\n            choice_name: '',\n            choice_num: ''\n        });\n    };\n    const onEdit = (name: string, record: Obj) => {\n        setStatus(3);\n        setVisible(true);\n        form.setFieldsValue(record);\n    };\n    const onDel = (name: string, record: Obj) => {\n        actionMaterial({\n            name,\n            number: record.choice_num,\n            status: 2,\n        }).then(data => {\n            message.success('删除成功');\n            fetchData();\n        });\n    };\n    useEffect(() => {\n        fetchData();\n    }, []);\n    const columns = getColumns({ onDel, onEdit });\n    return (\n        <div>\n            <Card\n                title=\"原料配置\"\n                extra={\n                    <Button onClick={onAdd} type=\"primary\">添加</Button>\n                }\n            >\n                <Table\n                    rowKey=\"choice_name\"\n                    dataSource={materialList}\n                    columns={columns}\n                    bordered\n                >\n                </Table>\n            </Card>\n            <Modal\n                title={status === 1 ? '添加原料' : '编辑原料'}\n                visible={visible}\n                footer={null}\n                onCancel={() => setVisible(false)}\n            >\n                <Form\n                    {...layout}\n                    form={form}\n                    onFinish={onSubmit}\n                    layout=\"vertical\"\n                >\n                    <FormItem name=\"choice_name\" label=\"名称\" required>\n                        <Input disabled={status === 3} width=\"100%\" placeholder=\"原料名称\" />\n                    </FormItem>\n                    <FormItem name=\"choice_num\" label=\"余量\" required>\n                        <Input width=\"100%\" placeholder=\"原料余量\" />\n                    </FormItem>\n                    <FormItem style={{ textAlign: 'center' }}>\n                        <Button type=\"primary\" htmlType=\"submit\">提交</Button>\n                    </FormItem>\n                </Form>\n            </Modal>\n        </div>\n    )\n}\n","import React from 'react';\nimport { Button } from 'antd';\n\nexport const getColumns = (action: Obj) => {\n    const columns = [\n        {\n            title: \"序号\",\n            dataIndex: \"id\",\n            render(id: string, record: any, index: number) {\n                return index + 1;\n            }\n        },\n        {\n            title: \"名称\",\n            dataIndex: \"choice_name\",\n        },\n        {\n            title: \"余量\",\n            dataIndex: \"choice_num\",\n        },\n        {\n            title: \"操作\",\n            dataIndex: \"choice_name\",\n            render(id: string, record: Obj) {\n                return (\n                    <div>\n                        <Button onClick={() => action.onDel(id, record)} size=\"small\" type=\"primary\">删除</Button>\n                        <Button onClick={() => action.onEdit(id, record)} size=\"small\" style={{ marginLeft: 10 }} type=\"primary\">编辑</Button>\n                    </div>\n                )\n            }\n        }\n    ];\n    return columns;\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Layout, Menu } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport { HashRouter as Router, Route, Switch, Link } from 'react-router-dom';\nimport Drink from './pages/drink';\nimport User from './pages/user';\nimport Deliver from './pages/deliver';\nimport Orders from './pages/orders';\nimport Material from './pages/material';\nimport './App.css';\nimport { SelectParam } from 'antd/lib/menu';\nconst { Header, Content, Footer, Sider } = Layout\n\nfunction App(): JSX.Element {\n    const ref = useRef<Router>(null);\n    const [current, setCurrent] = useState('');\n    const handleLogoClick = () => {\n        setCurrent('material');\n    };\n    const handleSelect = (param: SelectParam) => {\n        setCurrent(param.key);\n    };\n    useEffect(() => {\n        const hashRouter: any = ref.current;\n        const pathname = hashRouter?.history?.location?.pathname;\n        let pageId;\n        if (pathname === '/') {\n            pageId = 'material';\n        } else {\n            pageId = pathname?.slice(1);\n        }\n        setCurrent(pageId);\n    }, []);\n    return (\n        <div className=\"container\">\n            <Router ref={ref}>\n                <Layout style={{ height: '100vh' }}>\n                    <Sider\n                    >\n                        <Link onClick={handleLogoClick} to=\"/\">\n                            <div className=\"logo\">\n                                虚拟运营后台\n                            </div>\n                        </Link>\n                        <Menu\n                            theme=\"dark\"\n                            mode=\"inline\"\n                            onSelect={handleSelect}\n                            selectedKeys={[current]}\n                            defaultSelectedKeys={[current]}\n                        >\n                            <Menu.Item key=\"material\">\n                                <Link to=\"/\">\n                                    <span className=\"nav-text\">原料配置</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"drink\">\n                                <Link to=\"/drink\">\n                                    <span className=\"nav-text\">饮料配置</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"user\">\n                                <Link to=\"/user\">\n                                    <span className=\"nav-text\">用户列表</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"deliver\">\n                                <Link to=\"/deliver\">\n                                    <span className=\"nav-text\">配送员表</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"orders\">\n                                <Link to=\"/orders\">\n                                    <span className=\"nav-text\">订单列表</span>\n                                </Link>\n                            </Menu.Item>\n                        </Menu>\n                    </Sider>\n                    <Layout>\n                        <Header className=\"header\">\n                            <UserOutlined style={{ marginRight: 5 }} />\n                            root\n                        </Header>\n                        <Content style={{ margin: \"24px 16px 0\" }}>\n                            <div\n                                className=\"content\"\n                                style={{ padding: 24, minHeight: 360 }}\n                            >\n                                <Switch>\n                                    <Route path=\"/\" exact component={Material} />\n                                    <Route path=\"/drink\" exact component={Drink}/>\n                                    <Route path=\"/user\" component={User} />\n                                    <Route path=\"/deliver\" component={Deliver} />\n                                    <Route path=\"/orders\" component={Orders} />\n                                </Switch>\n                            </div>\n                        </Content>\n                        <Footer style={{ textAlign: \"center\" }}>\n                            Virtual Manage Backend ©2020 Created by QinYongLi\n                        </Footer>\n                    </Layout>\n                </Layout>\n            </Router>\n        </div>\n    )\n}\n\nexport default App\n","import axios from 'axios';\nimport { serverURL } from './constant'\n\nexport const initRequest = () => {\n    axios.defaults.baseURL = serverURL;\n    axios.interceptors.response.use((response) => {\n        return response.data;\n    }, (error) => {\n        return Promise.reject(error);\n    });\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { initRequest } from './utils/request'\nimport './index.css';\n\n\ninitRequest();\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}